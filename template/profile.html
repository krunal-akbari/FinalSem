{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <!--{{{-->
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>

        <title>Users / Profile - NiceAdmin Bootstrap Template</title>
        <meta content="" name="description" />
        <meta content="" name="keywords" />

        <!-- Favicons -->
        <link href="assets/img/favicon.png" rel="icon" />
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

        <!-- Google Fonts -->
        <link href="https://fonts.gstatic.com" rel="preconnect" />
        <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet"
        />

        <!-- Vendor CSS Files -->
        <link
        href="{% static 'css/bootstrap.min.css' %}"
        rel="stylesheet"
        />

        <!-- Template Main CSS File -->
        <link href="{% static 'css/a.css' %}" rel="stylesheet" />

        <!--}}}-->
    </head>

    <body>
        <!--{{{-->
        <main id="main" class="main">
            <div class="pagetitle">
                <h1>Profile</h1>
                <nav>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item">Users</li>
                        <li class="breadcrumb-item active">Profile</li>
                    </ol>
                </nav>
            </div>
            <!-- End Page Title -->

            <section class="section profile">
                    <!--{{{-->
                    <div class="row">
                        <div class="col-xl-4">
                            <div class="card">
                                <div
                                    class="card-body profile-card pt-4 d-flex flex-column align-items-center"
                                    >
                                    <object data="{{ base_ctx.coustomer.image }}" type="image/png">
                                        <img src="{% static 'img/profile/default.jpg' %}" alt="default img" class="rounded-circle" /> </object>
                                    <h2>
                                        {{ base_ctx.coustomer.name }}</h2>
                                    <div class="social-links mt-2">
                                        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
                                        <a href="#" class="facebook"
                                            ><i class="bi bi-facebook"></i
                                            ></a>
                                        <a href="#" class="instagram"
                                            ><i class="bi bi-instagram"></i
                                            ></a>
                                        <a href="#" class="linkedin"
                                            ><i class="bi bi-linkedin"></i
                                            ></a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-8">
                            <div class="card">
                                <div class="card-body pt-3">
                                    <!-- Bordered Tabs -->
                                    <ul class="nav nav-tabs nav-tabs-bordered">
                                        <li class="nav-item">
                                            <button
                                                class="nav-link active"
                                                data-bs-toggle="tab"
                                                data-bs-target="#profile-overview"
                                                >
                                                Overview
                                            </button>
                                        </li>

                                        <li class="nav-item">
                                            <button
                                                class="nav-link"
                                                data-bs-toggle="tab"
                                                data-bs-target="#profile-edit"
                                                >
                                                Edit Profile
                                            </button>
                                        </li>

                                        <li class="nav-item">
                                            <button
                                                class="nav-link"
                                                data-bs-toggle="tab"
                                                data-bs-target="#profile-settings"
                                                >
                                                Settings
                                            </button>
                                        </li>

                                        <li class="nav-item">
                                            <button
                                                class="nav-link"
                                                data-bs-toggle="tab"
                                                data-bs-target="#profile-change-password"
                                                >
                                                Change Password
                                            </button>
                                        </li>
                                    </ul>
                                    <div class="tab-content pt-2">
                                        <div
                                            class="tab-pane fade show active profile-overview"
                                            id="profile-overview"
                                            >

                                            <h5 class="card-title">Profile Details</h5>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-4 label">Full Name</div>
                                                <div class="col-lg-9 col-md-8"> {{ base_ctx.coustomer.name }} </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-4 label">State</div>
                                                <div class="col-lg-9 col-md-8">{{ base_ctx.coustomer.state }}</div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-4 label">Address</div>
                                                <div class="col-lg-9 col-md-8">{{ base_ctx.coustomer.address }}</div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-4 label">Phone</div>
                                                <div class="col-lg-9 col-md-8">{{ base_ctx.coustomer.phoneno }}</div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-4 label">Email</div>
                                                <div class="col-lg-9 col-md-8">
                                                    {{ base_ctx.coustomer.email }}
                                                </div>
                                            </div>
                                        </div>

                                        <div
                                            class="tab-pane fade profile-edit pt-3"
                                            id="profile-edit"
                                            >

                                            <!-- Profile Edit Form -->
                                            <form method="post" name="update" >
                                                <!--{{{-->
                                                {% csrf_token %} 
                                                <div class="row mb-3">
                                                    <label
                                                        for="profileImage"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Profile Image</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <object data="{% static 'img/profile/' %}{{ base_ctx.coustomer.image }}" type="image/png">
                                                            <img src="{% static 'img/profile/default.jpg' %}" alt="Profil " />
                                                        </object>
                                                        <div class="pt-2">
                                                            <a
                                                                href="#"
                                                                class="btn btn-primary btn-sm"
                                                                title="Upload new profile image"
                                                                ><form>
                                                                    <input type="file" style="width: 90px" accept="image/png","image/jpeg" > 
                                                            </form></i
                                                            ></a>
                                                            <a
                                                                href="#"
                                                                class="btn btn-danger btn-sm"
                                                                title="Remove my profile image"
                                                                >delete</i
                                                            ></a>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="fullName"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Full Name</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="fullName"
                                                            type="text"
                                                            class="form-control"
                                                            id="fullName"
                                                            value="{{ base_ctx.coustomer.name }}"
                                                            />
                                                    </div>
                                                </div>


                                                <div class="row mb-3">
                                                    <label
                                                        for="Country"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Country</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="country"
                                                            type="text"
                                                            class="form-control"
                                                            id="Country"
                                                            value="{{ base_ctx.coustomer.state }}"
                                                            />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="Address"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Address</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="address"
                                                            type="text"
                                                            class="form-control"
                                                            id="Address"
                                                            value="{{ base_ctx.coustomer.address }}"
                                                            />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="Phone"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Phone</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="phone"
                                                            type="text"
                                                            class="form-control"
                                                            id="Phone"
                                                            value="{{ base_ctx.coustomer.phoneno }}"
                                                            />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="Email"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Email</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="email"
                                                            type="email"
                                                            class="form-control"
                                                            id="Email"
                                                            value="{{ base_ctx.coustomer.email }}"
                                                            />
                                                    </div>
                                                </div>


                                                <div class="text-center">
                                                    <button type="submit" class="btn btn-primary" onclick="abc()">Save Changes</button>
                                                </div>
                                            </form>
                                            <style>
                                .btn-primary{
                                    background-color: #00a65a;
                                    border-color: #00a65a;
                                }
                                            </style>
                                            <script>
                                                function abc() {
                                                    var name = document.getElementById("fullName")
                                                    var country = document.getElementById("Country")
                                                    var address = document.getElementById("Address")
                                                    var phone = document.getElementById("Phone")
                                                    var email = document.getElementById("Email")
                                                    var details = {
                                                        'name': name.value,
                                                        'state': country.value,
                                                        'address': address.value,
                                                        'phoneno': phone.value,
                                                        'email': email.value,
                                                    };
                                                    console.log(details);
                                                    //generte csrdtoken
                                                    function getCookie(name) {
                                                        let cookieValue = null;
                                                        if (document.cookie && document.cookie !== '') {
                                                            const cookies = document.cookie.split(';');
                                                            for (let i = 0; i < cookies.length; i++) {
                                                                const cookie = cookies[i].trim();
                                                                // Does this cookie string begin with the name we want?
                                                                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                                                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                                    break;
                                                                }
                                                            }
                                                        }
                                                        return cookieValue;
                                                    }
                                                    const csrftoken = getCookie('csrftoken');
                                                    //send data to /api/user/{% url 'user_details' base_ctx.coustomer.user.id %}
                                                    $.ajax({
                                                        url: '{% url 'user_details' base_ctx.coustomer.user.id %}',
                                                        type: 'POST',
                                                        data: details,
                                                        headers: {
                                                            "X-CSRFToken": csrftoken
                                                        },
                                                        success: function (data) {
                                                            location.reload();
                                                        }
                                                    });
                                                }
                                            </script>
                                            <!--}}}-->
                                            <!-- End Profile Edit Form -->
                                        </div>

                                        <div class="tab-pane fade pt-3" id="profile-settings">
                                            <!-- Settings Form -->
                                            <form>
                                                {% comment %}{{{{% endcomment %}
                                                <div class="row mb-3">
                                                    <label
                                                        for="fullName"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Email Notifications</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <div class="form-check">
                                                            <input
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                id="changesMade"
                                                                checked
                                                                />
                                                            <label class="form-check-label" for="changesMade">
                                                                Changes made to your account
                                                            </label>
                                                        </div>
                                                        <div class="form-check">
                                                            <input
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                id="newProducts"
                                                                checked
                                                                />
                                                            <label class="form-check-label" for="newProducts">
                                                                Information on new products and services
                                                            </label>
                                                        </div>
                                                        <div class="form-check">
                                                            <input
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                id="proOffers"
                                                                />
                                                            <label class="form-check-label" for="proOffers">
                                                                Marketing and promo offers
                                                            </label>
                                                        </div>
                                                        <div class="form-check">
                                                            <input
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                id="securityNotify"
                                                                checked
                                                                disabled
                                                                />
                                                            <label
                                                                class="form-check-label"
                                                                for="securityNotify"
                                                                >
                                                                Security alerts
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="text-center">
                                                    <button type="submit" class="btn btn-primary" name"update">
                                                        Save Changes
                                                    </button>
                                                </div>
                                            </form>
                                            {% comment %}}}}{% endcomment %}
                                            <!-- End settings Form -->
                                        </div>

                                        <div class="tab-pane fade pt-3" id="profile-change-password">
                                            <!-- Change Password Form -->
                                            <form>
                                                {% comment %}{{{{% endcomment %}
                                                <div class="row mb-3">
                                                    <label
                                                        for="currentPassword"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Current Password</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="password"
                                                            type="password"
                                                            class="form-control"
                                                            id="currentPassword"
                                                            />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="newPassword"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >New Password</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="newpassword"
                                                            type="password"
                                                            class="form-control"
                                                            id="newPassword"
                                                            />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label
                                                        for="renewPassword"
                                                        class="col-md-4 col-lg-3 col-form-label"
                                                        >Re-enter New Password</label
                                                    >
                                                    <div class="col-md-8 col-lg-9">
                                                        <input
                                                            name="renewpassword"
                                                            type="password"
                                                            class="form-control"
                                                            id="renewPassword"
                                                            />
                                                    </div>
                                                </div>

                                                <div class="text-center">
                                                    <button type="submit" class="btn btn-primary">
                                                        Change Password
                                                    </button>
                                                </div>
                                            </form>
                                            {% comment %}}}}{% endcomment %}
                                            <!-- End Change Password Form -->
                                        </div>
                                    </div>
                                    <!-- End Bordered Tabs -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--}}}-->
            </section>
        </main>
        <!-- End #main -->
        <a
            href="#"
            class="back-to-top d-flex align-items-center justify-content-center"
            ><i class="bi bi-arrow-up-short"></i
            ></a>
        <script>
            //find None from whole document
            function findNone(doc) {
                var elements = doc.getElementsByTagName("*");
                for (var i = 0; i < elements.length; i++) {
                    if (elements[i].innerText == "None") {
                        elements[i].innerText = "-";
                    }
                }
            }
            findNone(document);
        </script>

        <!-- Vendor JS Files -->
        <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
        <script src"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
        <!-- Template Main JS File -->
        <script src=" {% static 'js/main1.js' %}"></script>
        <!--}}}-->
    </body>
</html>
